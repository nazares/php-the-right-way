---
title:   PEAR
isChild: true
anchor:  pear
---

## PEAR {#pear_title}

Менеджер пакетов-ветеран, которым пользуются некоторые PHP-разработчики, называется [PEAR][1]. Он ведет себя
аналогично Composer, но имеет некоторые заметные отличия.

PEAR требует, чтобы каждый пакет имел определенную структуру, а это означает, что автор пакета должен подготовить его
для использования с PEAR. Использование проекта, не подготовленного для работы с PEAR, невозможно.

PEAR устанавливает пакеты глобально, что означает, что после их установки они становятся доступными для всех проектов
на этом сервере. Это может быть хорошо, если многие проекты полагаются на один и тот же пакет с одной и той же версией,
но может привести к проблемам, если между двумя проектами возникнут конфликты версий.

### Как установить PEAR

Вы можете установить PEAR, загрузив установщик `.phar` и запустив его. В документации PEAR есть подробные
[инструкции по установке][2] для каждой операционной системы.

Если вы используете Linux, вы также можете взглянуть на менеджер пакетов вашего дистрибутива.
Debian и Ubuntu, например, имеют подходящий пакет php-pear.

### Как установить пакет

Если пакет указан в [списке пакетов PEAR][3], вы можете установить его, указав официальное имя:

{% highlight console %}
pear install foo
{% endhighlight %}

Если пакет размещен на другом канале, вам необходимо сначала «обнаружить» этот канал, а также указать его при установке.
См. [Использование документации канала][4] для получения дополнительной информации по этой теме.

* [Узнать больше о PEAR][1]

### Обработка зависимостей PEAR с помощью Composer

Если вы уже используете [Composer][5] и хотите также установить некоторый код PEAR, вы можете использовать Composer для
обработки зависимостей PEAR. PEAR репозитории больше не поддерживаются напрямую Composer версии 2, так что вы должны вручную добавлять репозиторий для установки PEAR пакетов:

{% highlight json %}
{
    "repositories": [
        {
            "type": "package",
            "package": {
                "name": "pear2/pear2-http-request",
                "version": "2.5.1",
                "dist": {
                    "url": "https://github.com/pear2/HTTP_Request/archive/refs/heads/master.zip",
                    "type": "zip"
                }
            }
        }
    ],
    "require": {
        "pear2/pear2-http-request": "*"
    },
    "autoload": {
        "psr-4": {"PEAR2\\HTTP\\": "vendor/pear2/pear2-http-request/src/HTTP/"}
    }
}
{% endhighlight %}

Первый раздел `"repositories"` будет использоваться, чтобы сообщить Composer, что он должен "инициализировать"
(или "обнаружить" в терминологии PEAR) репозиторий pear. Затем раздел `require` будет добавлять префикс к имени пакета
следующим образом:

> pear-channel/package

Префикс "pear" жестко запрограммирован, чтобы избежать конфликтов, поскольку канал pear может быть таким же, как, например,
имя поставщика другого пакета, тогда короткое имя канала (или полный URL-адрес) может использоваться для ссылки на канал,
в котором находится пакет.

Когда этот код будет установлен, он будет доступен в вашем каталоге vendor и автоматически доступен через автозагрузчик Composer:

> vendor/pear2/pear2-http-request/pear2/HTTP/Request.php

Чтобы использовать этот пакет PEAR, просто укажите его следующим образом:

{% highlight php %}
<?php
require __DIR__ . '/vendor/autoload.php';

use PEAR2\HTTP\Request;

$request = new Request();
{% endhighlight %}

* [Узнать больше об использовании репозиториев с Composer][6]

[1]: https://pear.php.net/
[2]: https://pear.php.net/manual/installation.getting.php
[3]: https://pear.php.net/packages.php
[4]: https://pear.php.net/manual/guide.users.commandline.channels.php
[5]: /#composer_and_packagist
[6]: https://getcomposer.org/doc/05-repositories.md
