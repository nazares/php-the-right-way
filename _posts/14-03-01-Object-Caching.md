---
isChild: true
anchor:  object_caching
---

## Кэширование объектов {#object_caching_title}

Бывают случаи, когда может быть полезно кэшировать отдельные объекты в вашем коде, например, с данными, получение которых
дорого, или вызовами базы данных, результат которых вряд ли изменится. Вы можете использовать программное обеспечение для
кэширования объектов, чтобы хранить эти фрагменты данных в памяти для чрезвычайно быстрого доступа в дальнейшем. Если вы
сохраняете эти элементы в хранилище данных после их извлечения, а затем извлекаете их непосредственно из кэша для
последующих запросов, вы можете добиться значительного повышения производительности, а также снизить нагрузку на серверы
 баз данных.

Многие из популярных решений для кэширования байт-кода также позволяют кэшировать пользовательские данные, так что есть
еще больше причин воспользоваться ими. APCu и WinCache предоставляют API для сохранения данных из вашего PHP-кода
в их кэш-память.

Наиболее часто используемыми системами кэширования объектов памяти являются APCu и memcached. APCu — отличный выбор для
кэширования объектов, он включает в себя простой API для добавления ваших собственных данных в кэш памяти и очень прост
в настройке и использовании. Единственное реальное ограничение APCu заключается в том, что он привязан к серверу, на
котором установлен. С другой стороны, Memcached устанавливается как отдельная служба, и к ней можно получить доступ по
сети, а это означает, что вы можете хранить объекты в сверхбыстром хранилище данных в центральном расположении, и
множество различных систем могут извлекать из него данные.

Обратите внимание, что при запуске PHP как (Fast-) CGI-приложения внутри вашего веб-сервера каждый процесс PHP будет
иметь свой собственный кеш, т. е. данные APCu не будут использоваться совместно вашими рабочими процессами. В этих
случаях вы можете вместо этого рассмотреть возможность использования memcached, так как он не привязан к процессам PHP.

В сетевой конфигурации APCu обычно превосходит memcached по скорости доступа, но memcached сможет масштабироваться
быстрее и дальше. Если вы не ожидаете, что ваше приложение будет запущено на нескольких серверах, или вам не нужны
дополнительные функции, которые предлагает memcached, тогда APCu, вероятно, будет вашим лучшим выбором для кэширования
объектов.

Пример логики с использованием APCu:

{% highlight php %}
<?php
// check if there is data saved as 'expensive_data' in cache
$data = apcu_fetch('expensive_data');
if ($data === false) {
    // data is not in cache; save result of expensive call for later use
    apcu_add('expensive_data', $data = get_expensive_data());
}

print_r($data);
{% endhighlight %}

Обратите внимание, что до версии PHP 5.5 было расширение APC которое предоставляло как кеш объектов, так и кеш байт-кода. APCu — это проект по
переносу кеша объектов APC на PHP 5.5+, поскольку PHP теперь имеет встроенный кеш байт-кода (OPcache).

### Узнайте больше о популярных системах кэширования объектов

*[APCu](https://github.com/krakjoe/apcu)
* [APCu Documentation](https://www.php.net/apcu)
*[Memcached](https://memcached.org/)
* [Redis](https://redis.io/)
* [WinCache Functions](https://www.php.net/ref.wincache)
